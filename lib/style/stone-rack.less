@stoneSizeRatio: 0.7;
@stoneMarginRatio: (1 - @stoneSizeRatio) / 2;
@compactRatio: 0.2;
@invertedCompactRatio: 3;

mei-stone-rack {
  display: block;
  position: absolute;
  overflow: hidden;

  mei-stone-roll {
    position: absolute;
    top: 0;
    left: 0;
    width: 50%;
    height: 50%;
    .transition(1s, ease-in);

    &.compact { 
      top: 50%;
      width: 100% * @compactRatio;
      mei-stone {
        top: 100% * @stoneMarginRatio * @compactRatio;
      
        .generate-compact-slots(@n, @i: 0) when (@i < @n) {
          &.roll-slot-@{i} {
            left: (@i * 8% * @stoneSizeRatio * 0.3);
            width: 8% * @stoneSizeRatio * @invertedCompactRatio;
          }
          .generate-compact-slots(@n, (@i + 1));
        }

        .generate-compact-slots(10);

      }
    }


    mei-stone {
      display: block;
      position: absolute;
      top: 100% * @stoneMarginRatio;
      width: 8% * @stoneSizeRatio;
      height: 100% * @stoneSizeRatio;
      .transition(1s, ease-in);
      margin-right: 5px;


      .generate-roll-slots(@n, @i: 0) when (@i < @n) {
        &.roll-slot-@{i} {
          left: (@i * 10% * @stoneSizeRatio);
        }
        .generate-roll-slots(@n, (@i + 1));
      }

      .generate-roll-slots(10);
    }
  }
}