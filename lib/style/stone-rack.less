@stoneSizeRatio: 0.7;
@stoneMarginRatio: (1 - @stoneSizeRatio) / 2;
@compactRatio: 0.2;

mei-stone-rack {
  display: block;
  position: absolute;

  mei-stone-roll {
    display: inline-block;
    width: 100%;
    height: 100%;

    .transition(1s, ease-in);
    &.compact { 
      width: 100% * @compactRatio;
      mei-stone {
        top: 100% * @stoneMarginRatio * @compactRatio;
      
        .generate-compact-slots(@n, @i: 0) when (@i < @n) {
          &.roll-slot-@{i} {
            left: (@i * 8% * @stoneSizeRatio * 0.3);
          }
          .generate-compact-slots(@n, (@i + 1));
        }

        .generate-compact-slots(10);

      }
    }


    mei-stone {
      display: block;
      position: absolute;
      top: 100% * @stoneMarginRatio;
      width: 8% * @stoneSizeRatio;
      height: 100% * @stoneSizeRatio;


      .generate-roll-slots(@n, @i: 0) when (@i < @n) {
        &.roll-slot-@{i} {
          left: (@i * 8% * @stoneSizeRatio);
        }
        .generate-roll-slots(@n, (@i + 1));
      }

      .generate-roll-slots(10);
    }
  }
}